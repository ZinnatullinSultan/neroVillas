const overlay=document.querySelector(".overlay-site"),form=document.querySelector(".form-container"),btn=document.querySelectorAll(".btn-form");btn.forEach((e=>{e.addEventListener("click",(()=>{overlay.classList.add("active"),form.classList.add("active")}))})),overlay.addEventListener("click",(()=>{overlay.classList.remove("active"),form.classList.remove("active")})),document.querySelectorAll(".next-step").forEach((e=>{e.addEventListener("click",(()=>{const t=e.closest(".quiz-step"),o=e.getAttribute("data-next-step"),n=document.getElementById(`step-${o}`);t.classList.remove("active"),n.classList.add("active")}))})),document.querySelectorAll(".prev-step").forEach((e=>{e.addEventListener("click",(()=>{const t=e.closest(".quiz-step"),o=e.getAttribute("data-prev-step"),n=document.getElementById(`step-${o}`);t.classList.remove("active"),n.classList.add("active")}))}));const scrollToTopBtn=document.getElementById("scrollToTopBtn");window.addEventListener("scroll",(()=>{window.pageYOffset>300?scrollToTopBtn.classList.add("show-scroll-btn"):scrollToTopBtn.classList.remove("show-scroll-btn")})),scrollToTopBtn.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})})),document.getElementById("consultation-form").addEventListener("submit",(function(e){e.preventDefault();const t=new FormData(this),o=[];if(document.querySelectorAll('input[name="contact_method"]:checked').forEach((e=>{o.push(e.value)})),0===o.length)return void alert("Выберите хотя бы один способ связи.");t.delete("contact_method"),t.append("contact_method",o.join(", "));const n=JSON.stringify(Object.fromEntries(t));fetch("/send",{method:"POST",headers:{"Content-Type":"application/json"},body:n}).then((e=>e.json())).then((e=>{const t=document.getElementById("serverMessage");e.success?(t.textContent="Заявка успешно отправлена!",t.style.color="green"):(t.textContent="Ошибка при отправке заявки.",t.style.color="red")})).catch((e=>{document.getElementById("serverMessage").textContent="Произошла ошибка при отправке заявки."}))})),document.addEventListener("scroll",(function(){const e=document.getElementById("portfolio").getBoundingClientRect(),t=document.body;e.top<=window.innerHeight&&e.bottom>window.innerHeight?t.classList.add("scrolled"):t.classList.remove("scrolled")})),document.querySelectorAll(".faq__item").forEach((e=>{e.addEventListener("click",(function(){const t=e.querySelector(".faq__text"),o=e.querySelector(".faq__btn");document.querySelectorAll(".faq__text").forEach((e=>{e!==t&&(e.classList.remove("faq__text--active"),e.previousElementSibling.querySelector(".faq__btn").classList.remove("faq__btn--active"))})),t.classList.toggle("faq__text--active"),o.classList.toggle("faq__btn--active")}))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".item__title, .item__content, .hero__title, .hero__subtitle, .hero__btn, .portfolio-section__title, .faq__title, .priorities__item"),t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.style.animationPlayState="running")}))}),{threshold:.5});e.forEach((e=>{t.observe(e)}))})),document.querySelector(".burger").addEventListener("click",(function(){this.classList.toggle("burger--active"),document.querySelector(".nav").classList.toggle("menu--active")}));